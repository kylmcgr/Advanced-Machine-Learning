# this is my old thing from last semester, I copied the weights after training so I wouldn't have to train each time

import gym
import time
from random import randint
from random import random
env = gym.make('SpaceInvaders-ram-v0')
ob = 128
size = 6
rang = 100000
b = [[4.397175303392564, -0.5586996257479597, 2.71400083172938, 3.876549803825479, 3.2327137595095445, -0.40496428374016946, 3.3080686429360324, 1.3781115799100059, 2.181735478287589, -3.731291668093453, 5.4415110688296835, -1.1182661025433684, -1.4899988992346809, -0.08127671638664435, -1.0388993993632292, 0.625844586271042, 1.066453337868747, 0.6012007456581288, 0.4544303178508098, 3.7195503334865045, 1.5854375098378117, 0.6926749728518373, -0.15150758018593335, -1.4953393187900181, 1.870929603474795, -0.004498435280555713, -0.4927858128923852, 4.869347513757484, -0.05179120826039485, 1.5125796695198925, 0.9757042446748285, 0.7618276555668435, 3.2871934487095205, 1.6932499701196484, 2.0713367171637462, 3.0727135250168747, 2.705316985917774, -0.7725537533472411, -1.010084808626046, 0.3521445658442297, 2.7585258517906937, 1.7144495994906181, 4.951462402794208, -3.604311656527759, -1.0894871744244217, -0.22677828408125467, 0.03175248144359588, 0.5649389417888784, -0.28972795609839164, 3.2013319137144274, 1.4830021528995012, 1.0328794960269367, 4.332529369684962, 1.8965227420851967, 6.067455616493301, 3.4421668722752745, 0.4887132507141405, -2.988845979694202, -0.013555088016481864, 2.2782386843912974, 2.8337550853568456, -4.091002751986064, 1.1599518868209613, 1.5025659002415106, -0.1601085192668088, -0.8633738136184024, 2.7651879886273067, -0.8444708986987008, 0.1438790651270614, 4.226969996398804, 0.9697137650911316, 0.46013211090707196, 1.6598875877973729, 3.2255892329514984, 2.69749467050082, 3.012522702649168, 3.311222024152583, 0.6940506014540635, 6.299710293179503, 1.9084750233131322, 2.2782258794175942, -1.7142966897681098, 3.079532765121373, 1.0054151229924397, 0.8591499124278243, 3.57951693960824, 0.33433530622026675, 0.5529037214193062, 1.3959442212811224, -1.8420406072821183, 0.5771190653307963, 0.8389194816265524, 2.2988437463114186, 0.7402976590996742, 1.210918478713846, 2.0641509689756807, 2.9296477327327883, -0.49102781698767495, 3.0034354235042233, 0.6662399308048026, 2.7633214324966637, 4.189152903883692, 3.0418606078405723, 0.5392459416526727, 1.1246572825526608, -2.534424223890232, 1.3046150919398656, 2.9303729713519875, -4.563917489509534, 5.876592702524256, 2.850163752146242, 0.3983474068458359, 1.4004300082263887, -1.208738338836607, -1.2310716180116077, -2.2786119370093214, 3.035755087705259, -1.7506761188510955, -4.501382168810229, 0.11617503815221153, 3.077732777741355, 1.9335138157805882, 4.743400951225158, 4.37841879557384, -0.2980826962602434, 0.4830213507180703, 0.38848296656379344, 0.4504174573330364], [0.7265238236621117, 2.823542706335686, -1.8387194261713393, 1.7827055937193714, 4.7771691292304626, -2.5546254129977863, -1.6210976361017682, 2.549644119926583, -2.810933523089505, 1.7734711829334566, 2.4710787377922836, 7.914787162435795, 4.156904794727149, 4.217770121762474, 1.2388463859716243, 5.459841275318157, 0.591433971145122, 1.372010068704878, 1.1095758362534434, 4.194471390128204, 3.0491511468511487, -2.106910524199092, 0.6941401074748568, 4.3075068422732805, 1.9929635149488498, -2.258279641768602, 2.5782761038666693, 0.15688678186068783, 0.47861024527088003, 0.3350029146730811, 1.0091943260893443, -1.579871677830202, 0.7843642690970694, -0.6322641356744576, -1.0014102259085016, -2.4832066317402237, -1.911204153798789, 3.227100566943811, 0.7746058952100048, 4.486697629826575, 2.35856645707554, 3.471365260991762, 1.085626859646398, -1.8507529576271216, 0.4171804314557406, 5.687330350143084, 1.8004882275968657, 4.81025569190183, 1.125161750409069, 1.9785520396197092, -0.8148543697680677, 2.264706998514276, -0.11824069168376017, -2.3830816930387204, 6.050122459739327, 1.5063974101478577, 0.3285996101769637, 1.2454086420655701, -1.207604724592014, -1.5939214807274533, -0.8315914815709669, 0.947686810600662, -1.1566570678378425, 4.057194597297833, 1.995680714498988, 2.1323313593794326, -0.6464375085914404, -1.1033646254453617, 3.703510619627031, 4.286725218338618, 3.7591914577603642, 6.0657556451660755, -0.48340006151297743, 0.42717816143805387, 1.493940180332709, 0.017797595087860385, 1.5438227410861547, 0.19945677934584105, -2.310672298838889, 2.9450959447592426, 2.533931856761453, 0.6211536439826133, -1.4377875089047467, 1.9072513961124595, 4.05000776455006, -0.8549057490617156, 3.5626012651115904, 1.3651937152733309, 1.547619720438206, 0.24095962128230086, -3.0283611098073613, -0.23227460715034787, 0.69906578276355, 2.928410469285141, -0.6950959816932618, 1.9183282771004275, 3.083876356874848, -0.7205932361226925, -0.7200581244234336, 4.893432006187363, -4.818927146639871, 1.7593658643743029, 0.6913846270579247, -3.844021611288764, -0.4454218637287808, 2.682635784191369, -1.9325314975661845, 2.8260087697846292, 3.7933772348951704, -1.841891069735309, 3.67361998002567, -0.6622926041030714, 5.408777975799634, 1.214775045238176, -1.3932485384089228, 1.3056453443200406, -3.5875138278521836, 1.8912169553026454, 5.211287052621489, 0.32833150382368426, 3.1898003068907386, -2.1344002637080504, 5.358277593488997, -0.0691080814652345, 1.2506143179765923, 1.1139256488729237, 1.4209921117483046, 2.5235526624978117], [-0.4545128062147148, 3.1303779302492125, 5.134494448260718, 3.601412248381471, 3.918071368963788, 0.4809607453090037, 0.246166038007545, 4.796878536474157, 1.2730985353297504, 1.0642838639009717, -2.2806641452486582, 3.258095127809767, 1.20828892566231, -0.029964781925323924, -1.759152420821777, 2.126003507255815, -0.7499073898312425, 4.144516978826466, 2.8191602666503153, 3.508648611116314, -2.1860788458541673, 5.664352056098705, 0.5894971791327648, -2.613401101737921, 1.858136982417119, -3.251383275233242, -3.9804192707502386, 2.7280854200500397, -0.34742802586994137, 1.3923231621748138, 2.0536086933841835, 5.2668062838918015, -2.163061741451208, 2.9388102163181697, 1.7469726585057224, 1.1882624958754875, 2.410667819616771, 4.598993338276276, -3.5132877684787367, -0.9764364777728984, 1.3716499587162148, 0.6527058543310784, 0.8930276953372311, 1.3681679500086226, 4.322537817937891, 1.021378100070495, -1.6506251247770682, 0.9740697471617508, -1.5038694560168366, 3.3045966217724265, -1.5601508687725136, 0.8707121559824649, 3.1612607897680394, 3.272716111021595, 1.2286145409720566, -3.099421623666437, 5.480761130951437, 0.5956723724820145, 1.4513478355433294, 0.7036826588136476, -3.5322106335890044, 1.284333117905011, -1.6317912525034501, 1.9033390183063144, 1.2412410382419614, -1.2990033259179872, 1.7896092883691934, 4.954334476527195, 0.5541001771810592, -0.8255347595017535, 0.2784139437100259, 1.3519487824985317, 1.432243469131948, 0.8119862163530052, 3.859093563388004, 0.2519021285165217, -2.7427332200004066, 0.27952697121874626, 5.348018831019198, 2.588371525740386, 5.2307957907905, -1.0135870470897352, 3.70941492353186, 3.9888624886366646, -1.41539028917899, 0.6008573525760246, 1.8896058108362412, -0.019187210852065872, 4.750878441026976, -1.0832653041016325, -1.3763809343734514, 5.133279953464717, 3.901512133678427, 4.385669731176605, 1.009001344876975, 1.2136040593556836, 5.4915228663662035, 3.7293984879403004, 1.942723846560964, -0.7126248844583976, 5.629356132912227, -0.6761833729054441, -1.7489520328566697, 1.3410389186723595, 2.4585855943197354, 0.8298980666098388, 1.497178260112701, 4.292719594478975, 3.804552684879651, 1.259739281537566, -0.7916417344241855, -5.062341361648027, 2.0522328097401914, -0.970723091317117, 0.3308973180463286, 4.522727310283558, 4.375770429679944, 1.621584465868348, 1.077456196961935, 4.1258103198204115, -1.4270626056027167, 0.17179763860786568, 3.8866346567694183, 1.1879733821312215, 4.158329912190159, -0.23066711887306113, 2.876404286697827, -2.412759582721675], [0.8687349950150245, -0.05463250687854759, 5.511358848789206, -0.8478536903863876, 0.5539082811884726, 2.721989105406864, -0.05119961564521547, 0.2995752497061508, 2.287033650591519, 0.27450755735642285, 1.6282655703229671, -1.6692832745140194, 0.2783903894122046, 1.5306866172590903, 1.8485354003650791, -0.5721500523440095, 2.9422819311956543, 0.5469267750306683, 3.514223935653024, 3.3232033382406656, 2.3667249243787585, 3.2346111454863067, 2.492158431334529, -1.4071874800681146, -1.8045091753987772, -0.6894123945110764, 0.7530330091925113, -2.038108491210254, -2.1099428022497833, 0.7409463798566893, 3.6809129738045323, 5.355793518384826, -0.9849674106991166, -0.32171872637655063, 0.33550486946834157, 1.5811176121186508, 1.3344282535818723, -2.0937166255896438, -0.1662714637918643, 2.3168150389849314, 0.5731304536790898, -0.8664889777894702, 1.0278261646476534, -3.565996906896049, 4.039097398125472, 2.557837975589773, -0.8276586115631062, 2.5711017084355348, -0.8586038183684361, 0.25738012531814625, 2.241202746594934, 0.5847781373627372, 5.707369753926189, -0.13283659859840924, 0.7904351027214764, -1.2720821267189248, 0.9304276503821034, 4.133380341649556, 3.6528887391546663, 0.9707099696620536, -1.980498496895366, 5.607798581798626, 3.5188270318029957, 4.097394419876833, 1.6221387492206965, -0.8756334940942607, -4.0343813968479285, -3.209141000266879, -0.12445396226738215, 3.8268253732333983, -0.4192255054096983, 1.0403592099254988, 0.7818291163040476, 4.099519341906587, 0.6554602358339892, -1.9830482641382305, -3.398323615165162, -0.9656880249233861, -0.25877554691700144, -3.311863249478595, 3.195794428069211, 3.3198358811491486, 0.7016006834875306, -0.21672475938877578, -0.5615426083352584, -1.0307817362355718, 1.7317431072801386, 6.1575386291506, -1.6912848330504338, 6.457696757307107, 2.083414507522691, 1.6281892019524233, -1.480665245888351, 4.342570612955317, 0.014449097145628809, 2.2307820342297946, 1.3114170541663, 2.0765866695836945, -2.282894314832788, -0.3630344380552326, -2.1670621607173706, 1.9390703109684426, -0.7823634312981476, -2.0104235398319528, 2.208874399851772, -1.9391920583986488, 1.8665017308220742, 4.065254052297947, 4.55083293175389, -2.110302119078347, 0.4463339904777033, 2.2709834933522224, 1.867370417202353, -2.3120556266421843, 0.6910568309978145, 1.020372309023587, -0.4776579479944041, -0.2779289982074611, 4.515674385175205, 1.4443672416321114, -0.4302542782058598, 2.0615154989970286, 0.4634469263989469, 1.899764418380572, 3.1491043429275276, -1.051070305312408, 1.0482776954892534, 2.260502243133232], [-3.8200545407209168, 2.8359562504101365, 2.82613689531809, 2.7964132088040703, -0.7193850148468433, 1.5021396725776417, -0.8027337054279204, 0.40559095456832894, 1.3685833668435747, 3.247822375594131, -0.012497943056094085, -3.1477580748831437, -1.7954093154922621, 2.7057552614992346, -0.550806805054834, 1.1483591645694688, -0.871703248305898, -0.30827056966337585, -0.5125210049522295, -1.6182356275788896, -2.278066095817766, 1.7177078480936665, 5.263310736683188, 5.619300509987056, 0.9188794855342111, 1.781252491801167, 2.873677523701018, -0.41337694958551396, -1.5692893479357282, 4.473645518344931, -1.5237011980966477, 1.6632917941488072, 2.1113336082364653, 0.4789317873207235, 1.368076533261561, 1.7805218509821892, 2.8901970272188953, 0.144093399643336, -0.13629149444624167, 4.873963718833883, 2.8954223217307886, 2.589482650329138, -1.2942213575173245, 2.7119345095958236, 5.49008513577726, -1.1605426931893013, -0.028221068823501616, 0.035850958005189115, 3.1135206134850257, 2.1677586936163538, 3.4124118605728597, 5.602510200023489, 1.6586500130672255, -2.6667596801962326, 1.5405243651717566, 2.907760668656219, -4.529612906418789, 2.2954917628146188, 0.5844171676099523, 1.7453885211669056, 3.9561221977743726, 1.3282774652982268, 1.0672140761919573, -0.5267190709549678, 7.038610625427628, -1.8024956551372358, 2.9081009734441645, 2.3733749706700964, 3.211577247604115, 1.356414708001814, -1.8589939170519187, 1.3437398960546254, 1.1212727316944102, 0.046076928770377945, 0.3609022764197156, 3.136119427248659, 4.185182794747018, 3.3158060597194137, 1.9548672390481923, 6.271249168501187, -1.8421987432542104, 1.2628307156569367, 8.719878990778327, -1.891248520338948, 4.2370716226977825, -2.009525904462233, 1.8380083746807587, 0.9349971090858935, -0.7239046451394182, -1.3615792106517541, 0.4279220611104164, 4.162789969338288, 1.4882724478501808, -3.9949483975669855, -0.911959081169514, 2.5899113282559068, 1.1973549920628674, -0.7202957689542497, 1.3686794068939672, 0.6401912061410255, -0.22766393905356597, 1.6012399994842574, 0.07167102370141154, 4.155927783589986, 0.337744838128899, -0.7500803027434029, 0.35332760621463066, 5.006544031219785, 1.344626485158637, -0.10728118271586662, 0.3160028723829891, -0.2047922573435288, -2.95478576588506, 3.7094789876180143, -1.1698071418088634, -1.6697676617500348, -0.633706378788961, 1.2367982620388436, 1.3208819228945774, 5.824233354737339, -1.8500383815799977, 1.7441821407688187, -0.5669892368913636, -0.55678031116677, 1.1684145782440472, 2.967539309006721, 1.859182484254789, -1.8724738767421032], [-2.069355231764703, 1.4640017547508257, 3.801626507904481, -4.530199246126945, -0.41591745875051833, 2.010549466445122, 1.6273147127205345, 1.0449142909662819, -1.4187031940796582, 2.9184873923489656, -0.661991719335083, 3.6970829791510615, 0.6115013151146433, -3.741335122298816, 1.3873682255795683, -0.1536257681981823, 2.1369116475084526, 4.517342007703729, -0.9923931765662315, 2.906924397071047, 2.583611938022122, 3.632259413318974, 1.8982345867103483, 6.092680812936467, 0.9028582653013346, -3.6998383290957517, 0.37415022969282985, -0.5076666216830241, -0.645530254652787, -1.366644198500117, -1.675358459571725, -0.3729239336378283, 0.13696559520024687, -3.059571117611892, 1.6415432017288227, -0.8962193487745329, 0.46805699499414444, 2.620993589448022, 2.7262482710171763, 2.548466505799637, 4.59915033439086, -1.7845772695074469, -0.9313641734887337, 2.296215743424339, -2.901114466836964, 4.954594141188013, 0.9004815721032371, -0.4314344685675966, 2.401269315069419, 0.8612785714205935, -3.6609913072020634, 0.5422655762365214, 1.1715551324182034, -0.4273947230445285, -1.8022576087602482, 0.44519772373357736, 4.615720561718462, -2.7690516760704664, 4.2650415880206225, 4.327491653303279, -2.4113290616573817, 1.2591015869889801, -1.7573762343259, 3.12275732523692, 0.9795335955711999, 3.2843743595538633, -1.0530275060564014, 0.8847226186195829, 0.4981422946535765, -2.7888833556880748, -0.1503298879053736, -0.6907394606069999, 6.135786246964213, 0.35588030942193716, 2.119474468956157, -3.394625119854231, 1.2248131895859922, 0.9156810269261471, 3.0522741019636257, -0.9799567522631001, -5.815834595665594, 2.0490068822646617, 3.432730381708536, 1.919113295251073, -0.9733073232317009, -3.7547294162953877, -0.28328702612705614, 0.032153509224860155, 5.617762440014894, 0.9102277596321791, -0.24574555691704303, 0.17299065009606496, -0.3349448407584541, 1.35058329565819, 4.914589528862543, -0.1312355563705081, 2.0746023428671814, 3.3869756021800383, 0.0013322905084114378, 0.06902525087216094, 2.698166709350211, -1.6849002457858275, -1.1637795777371738, 0.7567807635290551, 2.1918637899196254, 4.818848313042582, -0.006737008782637499, 2.2193030740901047, -1.9673457540612336, -0.13079344179214458, -1.8473808720325455, 1.141773782118753, -0.33446525802976335, 1.786666607839659, 2.518930747158789, 0.03692869722921799, 0.5401259233074771, 0.4408793463653726, -0.2325896872101496, -2.6826149033353595, 1.2513089210476571, 4.836031969612966, 3.9090310234688195, 1.8726316949996669, 6.361486869258966, 3.140080734417811, 0.27086589810822015, 0.9909874848895719]]
# b = []
for x in range(size):
    b.append([])
    for y in range(ob):
        b[x].append(random()*2-1)
def b100(ab):
    totalScore = 0
    for k in range(10):
        observation = env.reset()
        for t in range(rang):
            # env.render()
            action = []
            for x in range(size):
                action.append(0)
                for y in range(ob):
                    action[x] += ab[x][y]*observation[y]
            for x in range(size):
                if max(action)==action[x]:
                    observation, reward, done, info = env.step(x)
                    break
            totalScore += reward
            # totalScore += 1
            if done:
                break
    bScore = totalScore/100
    return bScore
def show():
    score = 0
    observation = env.reset()
    for t in range(rang):
        env.render()
        action = []
        for x in range(size):
            action.append(0)
            for y in range(ob):
                action[x] += b[x][y]*observation[y]
        for x in range(size):
            if max(action)==action[x]:
                observation, reward, done, info = env.step(x)
                break
        score += reward
        if done:
            break
    return score
def train():
    bestReward = 0
    for k in range(10):
        observation = env.reset()
        a = []
        for x in range(size):
            a.append([])
            for y in range(ob):
                a[x].append(1)
        for x in range(len(a)):
            for y in range(len(a[x])):
                a[x][y] = b[x][y]
                a[x][y] += (random()*2-1)
        score = 0
        # a[randint(0,5)][randint(0,ob-1)] += (random()*2-1)
        if k%10==0:
            print (100-k/10)
        for t in range(rang):
            # print t
            action = []
            for x in range(size):
                action.append(0)
                for y in range(ob):
                    action[x] += a[x][y]*observation[y]
            for x in range(size):
                if max(action)==action[x]:
                    observation, reward, done, info = env.step(x)
                    break
            score += reward
            if done or t==rang-1:
                if score > bestReward:
                    # thisBest = b100(a)
                    thisBest = score
                    if thisBest>bestReward:
                        bestReward = thisBest
                        print ("new best", thisBest)
                        for x in range(size):
                            for y in range(ob):
                                b[x][y] = a[x][y]
                # if t > bestReward:
                #     thisBest = b100(a)
                #     if thisBest>bestReward:
                #         bestReward = t
                #         print "new best", thisBest, score
                #         for x in range(size):
                #             for y in range(ob):
                #                 b[x][y] = a[x][y]
                break
    return bestReward
# print (train())
# print (b100(b))
# print (b)
print (show())
